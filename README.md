# README — Data Dictionary (FAIR / Metadata)

This repository provides raw SourceData and a reproducible analysis pipeline for the manuscript:

**“From ordinal disease scores to probabilistic barriers: a reusable metric for resilience and defense allocation”**

The raw input datasets are provided as CSV files under `data/` and correspond to manuscript Source Data exports.  
All computations convert ordinal severity scores into a severe-event probability and a Defense Barrier metric.

---

## 1. Common conventions used across datasets

### 1.1 Ordinal severity score (`score`)
- `score` is an ordinal disease severity rating on a **1–5** scale.
- The meaning of each score category follows the original experimental scoring protocol described in the cited manuscripts for this pathosystem.

### 1.2 Definition of “severe” outcome
- We define **severe infection** as `score ≥ k`, where the default threshold is:
  - **k = 4**

### 1.3 Severe-event probability
For each condition group:
- **Empirical** probability:  
  `P_severe = n_severe / n_total`, where `n_severe` is the count of observations with `score ≥ k`.

- **Finite-sample / zero-event correction (Jeffreys-type pseudocount):**  
  `P_severe_adj = (n_severe + 0.5) / (n_total + 1)`

### 1.4 Defense Barrier metric
- `B = −ln(P_severe_adj)`

This maps severe-event risk onto an additive “barrier height” scale.

### 1.5 Maslow index (stage-weighted score expectation)
- `mean_score = E[score]`  
This is numerically the mean ordinal score but interpreted as a stage-weighted progression index.

---

## 2. Input files under `data/`

> Note on identifiers: some datasets use `host`, others use `accession`.  
> Both represent plant genotype/clone identifiers as provided in the original SourceData exports.  
> We keep original column names to preserve provenance.

### 2.1 `Figure2_SourceData.csv` — Surface integrity dataset
**Purpose:** Effect of tissue identity and surface treatment on severe infection probability.

**Columns**
- `host` (string): host genotype/clone ID (e.g., `BTx623`, `PI609251`, `SH1152`, `TAM428`)
- `isolate` (string): pathogen isolate ID
- `tissue` (string): tissue region (`blade`, `midrib`)
- `surface_treatment` (string): surface condition (`Control`, `Imprinting`, `Tween 20`, `Rubbed`)
- `score` (integer): ordinal severity score (1–5)

### 2.2 `Figure3_SourceData.csv` — Regrowth resilience dataset
**Purpose:** Compare severe infection risk before vs. after regrowth.

**Columns**
- `host` (string): host genotype ID
- `isolate` (string): pathogen isolate ID
- `round` (integer): experimental round
  - `1` = pre-cut
  - `2` = post-regrowth
- `score` (integer): ordinal severity score (1–5)

**Data integrity note:** `round` should not contain missing values.

### 2.3 `Figure4_SourceData.csv` — Tissue depth dataset (leaf vs rhizome)
**Purpose:** Compare leaf vs rhizome defense depth and host life-history contrast.

**Columns**
- `Experiment_ID` (string): experimental batch ID
- `accession` (string): host genotype/clone ID
- `isolate` (string): pathogen isolate ID
- `tissue` (string): tissue type (`leaf`, `rhizome`)
- `score` (integer): ordinal severity score (1–5)

**Derived field used in analysis**
- `host_type` (string): inferred from `accession` naming convention:
  - accessions starting with `SH` → `Johnsongrass`
  - otherwise → `Sorghum`

### 2.4 `Figure5_SourceData.csv` — Mature stage population (GS6) dataset
**Purpose:** show clone-level heterogeneity in mature Johnsongrass population.

**Columns**
- `accession` (string): clone ID (e.g., `SH1152`, `SH1130`, etc.)
- `growth_stage` (string): stage label (e.g., `GS6`)
- `score` (integer): ordinal severity score (1–5)

---

## 3. Outputs generated by the tables-only pipeline

Running:

`python src/reproducible_analysis.py --data data --out outputs`

creates CSV tables under:

`outputs/tables/`

Key outputs include:
- `surface_metrics.csv` (group summaries for surface dataset)
- `glm_surface_params.csv` (GLM coefficients for surface dataset)
- `glm_surface_predicted.csv` (GLM predicted probabilities on unique design grid)
- `regrowth_metrics.csv`, `glm_regrowth_params.csv`, `glm_regrowth_predicted.csv`
- `depth_metrics.csv`, `glm_depth_params.csv`, `glm_depth_predicted.csv`
- `gs6_metrics.csv`

These tables are intended to reproduce the manuscript’s numerical results independent of figure rendering.
